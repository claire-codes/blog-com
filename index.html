---
layout: default
---

<div class="home">

  <h1 class="page-heading">Posts</h1>

  <div>
    <p>Filter by category:</p>
    <input type="checkbox" data-category="ruby" id="ruby-check" onchange="displayFiltered()"/><label for="ruby-check">Ruby</label> <input type="checkbox" data-category="javascript" id="javascript-check" onchange="displayFiltered()"/><label for="javascript-check">JavaScript</label> <input type="checkbox" data-category="longread" id="longread-check" onchange="displayFiltered()"/><label for="longread-check">Longread</label> <input type="checkbox" data-category="heroku" id="heroku-check" onchange="displayFiltered()"/><label for="heroku-check">Heroku</label> <input type="checkbox" data-category="css" id="css-check" onchange="displayFiltered()"/><label for="css-check">CSS</label> <input type="checkbox" data-category="angularjs" id="angularjs-check" onchange="displayFiltered()"/><label for="angularjs-check">AngularJS</label>
  </div>
  <br />

  <ul class="post-list">
    {% for post in site.posts %}
      <li class="post-head" data-categories="{%for category in post.categories %}{{category}} {% endfor %}">

        <h2>
          <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
        </h2>

        <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>
        {%for category in post.categories %}
          <span>/{{category}} </span>
        {% endfor %}

      </li>
    {% endfor %}
  </ul>

  <p class="rss-subscribe">subscribe <a href="{{ "/feed.xml" | prepend: site.baseurl }}">via RSS</a></p>

</div>

<script type="text/javascript">
  var findSelectedItems = function() {
    var allTypes = document.getElementsByTagName('input');
    var which = [];
    for (var i = 0; i < allTypes.length; i++) {
      if (allTypes[i].checked) {
        which.push(allTypes[i].getAttribute('data-category'));
      }
    };
    return which;
  }

  var displayFiltered = function() {
    var itemsToShow = findSelectedItems();
    // Go through all li's and decide whether to show or hide depending on whether it's in the itemsToShow array
    var allItems = document.querySelectorAll('li.post-head');
    // if none are checked, show everything again
    if (itemsToShow.length == 0) {
      for (var l = 0; l < allItems.length; l++) {
        allItems[l].style.display = "list-item";
      }
    } else {
      for (var i = 0; i < allItems.length; i++) {
        // Account for items with more than one category
        types = allItems[i].getAttribute('data-categories').split(" ");
        for (var j = 0; j < types.length; j++) {
          if (itemsToShow.indexOf(types[j]) != -1) {
            allItems[i].style.display = "list-item";
            break;
          } else {
            allItems[i].style.display = 'none';
          }
        }
      }
    }
  }
</script>
