---
layout: default
---

<div class="home">

  <div style="font-style: italic">
    <p style="font-weight: 700; float: right">Showing <span id="displayed">{{ site.posts | size }}</span> of {{ site.posts | size }}</p>
    <p>Filter by category:</p>
    <div class="filter-row">
      {% for c in site.categories %}
      <input type="checkbox" data-category="{{c | first}}" id="{{c | first}}-check" onchange="displayFiltered()"/><label for="{{c | first}}-check">{{c | first}}</label>
      {% endfor %}
    </div>
  </div>
  <br />

  <div class="posts">
    {% for post in site.posts %}
      <div class="post py3" data-categories="{%for category in post.categories %}{{category}} {% endfor %}">
          <p class="post-meta">
              {{ post.date | date: site.date_format }}        {%for category in post.categories %}
                        <span style="color: #454545;">/{{category}} </span>
                      {% endfor %}
          </p>
          <a href="{{ post.url | prepend: site.baseurl }}" class="post-link"><h3 class="h1 post-title">{{ post.title }}</h3></a>
          <p class="post-summary">
            {{ post.summary }}
          </p>
        </div>
    {% endfor %}
  </div>

  <p class="rss-subscribe">subscribe <a href="{{ "/feed.xml" | prepend: site.baseurl }}">via RSS</a></p>

</div>

<script type="text/javascript">
  var findSelectedItems = function() {
    var allTypes = document.getElementsByTagName('input');
    var which = [];
    for (var i = 0; i < allTypes.length; i++) {
      if (allTypes[i].checked) {
        which.push(allTypes[i].getAttribute('data-category'));
      }
    };
    return which;
  };

  var countDisplayed = function() {
    document.getElementById('displayed').innerHTML = document.querySelectorAll('.post.py3.show').length;
  };

  var displayFiltered = function() {
    var itemsToShow = findSelectedItems();
    // Go through all li's and decide whether to show or hide depending on whether it's in the itemsToShow array
    var allItems = document.querySelectorAll('.post.py3');
    console.log(allItems);
    // if none are checked, show everything again
    if (itemsToShow.length == 0) {
      for (var l = 0; l < allItems.length; l++) {
        allItems[l].className = "post py3 show";
      }
    } else {
      for (var i = 0; i < allItems.length; i++) {
        allItems[i].className = "post py3";
        // Account for items with more than one category
        types = allItems[i].getAttribute('data-categories').split(" ");
        for (var j = 0; j < types.length; j++) {
          if (itemsToShow.indexOf(types[j]) != -1) {
            allItems[i].className = "post py3 show";
            break;
          } else {
            allItems[i].className = "post py3 hide";
          }
        }
      }
    }
    countDisplayed();
  };
</script>
